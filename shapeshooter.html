<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Target Shooter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f0f0;
        }

        #gameCanvas {
            background-color: #87ceeb;
            border: 2px solid #333;
            width: 90%;
            height: 80vh;
        }

        #info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #333;
            font-size: 18px;
            font-weight: bold;
        }

        #restartButton {
            position: absolute;
            top: 60px;
            left: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }

        #restartButton:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body>
    <div id="info">
        <span id="score">Score: 0</span>
        <span id="timer">Time: 10</span>
    </div>
    <button id="restartButton">Restart Game</button>
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const timerElement = document.getElementById('timer');
        const restartButton = document.getElementById('restartButton');

        const targets = [];
        let score = 0;
        let timeLeft = 10;
        let gameInterval;
        let timerInterval;

        function getRandomColor() {
            const colors = ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#8B00FF'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function drawTargets() {
            targets.forEach(target => {
                ctx.beginPath();
                ctx.arc(target.x, target.y, target.radius, 0, Math.PI * 2);
                ctx.fillStyle = target.color;
                ctx.fill();
                ctx.closePath();
            });
        }

        function updateTargets() {
            targets.forEach(target => {
                target.x += target.vx;
                target.y += target.vy;

                if (target.x < 0 || target.x > canvas.width) target.vx *= -1;
                if (target.y < 0 || target.y > canvas.height) target.vy *= -1;
            });
        }

        function spawnTarget() {
            const radius = Math.random() * 20 + 30;
            targets.push({
                x: Math.random() * (canvas.width - radius * 2) + radius,
                y: Math.random() * (canvas.height - radius * 2) + radius,
                radius: radius,
                vx: Math.random() * 4 - 2,
                vy: Math.random() * 4 - 2,
                color: getRandomColor()
            });
        }

        function checkHit(x, y) {
            targets.forEach((target, index) => {
                const dx = x - target.x;
                const dy = y - target.y;
                if (Math.sqrt(dx * dx + dy * dy) < target.radius) {
                    targets.splice(index, 1);
                    score++;
                    scoreElement.textContent = `Score: ${score}`;
                }
            });
            if (targets.length === 0) {
                endGame();
            }
        }

        function endGame() {
            clearInterval(gameInterval);
            clearInterval(timerInterval);
            restartButton.style.display = 'block';
        }

        function startGame() {
            score = 0;
            timeLeft = 10;
            scoreElement.textContent = `Score: ${score}`;
            timerElement.textContent = `Time: ${timeLeft}`;
            restartButton.style.display = 'none';
            targets.length = 0;

            gameInterval = setInterval(() => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawTargets();
                updateTargets();
            }, 1000 / 60);

            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `Time: ${timeLeft}`;
                if (timeLeft <= 0) endGame();
            }, 1000);

            // Spawn initial targets
            for (let i = 0; i < 30; i++) spawnTarget();
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            checkHit(x, y);
        });

        restartButton.addEventListener('click', startGame);

        startGame(); // Start the game initially
    </script>
</body>

</html>